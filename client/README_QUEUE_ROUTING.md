# RTL_433 Client - Queue/Topic Routing

## 🎯 Обзор

RTL_433 Client теперь поддерживает автоматическую маршрутизацию сообщений по различным очередям/топикам в зависимости от типа данных.

## 📊 Маршрутизация по типам данных

### **RabbitMQ Routing:**
- **OOK пакеты** → очередь `ook_raw` (routing_key: "ook_raw")
- **FSK пакеты** → очередь `fsk_raw` (routing_key: "fsk_raw")  
- **Декодированные устройства** → очередь `detected` (routing_key: "detected")

### **MQTT Routing:**
- **OOK пакеты** → топик `ook_raw`
- **FSK пакеты** → топик `fsk_raw`
- **Декодированные устройства** → топик `detected`

## 🔧 Использование

### Пример запуска с RabbitMQ:
```bash
./rtl_433_client -T amqp://guest:guest@localhost:5672/rtl_433/signals -r test.cu8
```

### Пример запуска с MQTT:
```bash
./rtl_433_client -T mqtt://localhost:1883/rtl_433/signals -r test.cu8
```

## 📈 Результат

При обработке файла `test.cu8`:
- **2 OOK пакета** отправлены в `ook_raw`
- **6 FSK пакетов** отправлены в `fsk_raw`
- **2 Toyota TPMS устройства** отправлены в `detected`

## 🏗️ Архитектура

```
┌─────────────────┐     ┌────────────────────┐
│   RTL_433       │     │   RabbitMQ/MQTT    │
│   Client        │     │     Broker         │
│                 │     │                    │
│ OOK пакеты   ──────────► ook_raw            │
│ FSK пакеты   ──────────► fsk_raw            │  
│ Декодированные ────────► detected           │
└─────────────────┘     └────────────────────┘
```

## 🔨 Технические детали

### Ключевые функции:
- `transport_send_pulse_data_to_queue()` - отправка pulse_data в указанную очередь/топик
- `transport_send_demod_data_to_queue()` - отправка device_data в указанную очередь/топик
- `client_pulse_handler_with_type()` - определяет тип модуляции и выбирает правильную очередь

### Совместимость транспортов:

| **Транспорт** | **Маршрутизация** | **Механизм** |
|---------------|-------------------|--------------|
| **RabbitMQ**  | ✅ Поддерживается | `routing_key` |
| **MQTT**      | ✅ Поддерживается | `topic` |
| **HTTP**      | ❌ Не применимо   | URL endpoint |
| **TCP/UDP**   | ❌ Не применимо   | Socket |

## 📝 Логирование

Клиент выводит подробные логи о маршрутизации:
```
Client: Sent OOK signal: 1 pulses to queue: ook_raw
Client: Sent FSK signal: 59 pulses to queue: fsk_raw
Client: Sent device data: Toyota TPMS to queue: detected
```

## 🚀 Преимущества

1. **Разделение данных** - различные типы сигналов обрабатываются независимо
2. **Масштабируемость** - можно настроить разные воркеры для разных типов данных
3. **Гибкость** - легко добавить новые типы маршрутизации
4. **Мониторинг** - простое отслеживание статистики по типам сигналов
